<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title>Terraform: Multi-cloud demo - Part 1 - Foundations - Dave's DevOps blog</title>
<meta name=renderer content="webkit">
<meta name=viewport content="width=device-width,initial-scale=1,user-scalable=yes">
<meta name=MobileOptimized content="width">
<meta name=HandheldFriendly content="true">
<meta name=applicable-device content="pc,mobile">
<meta name=theme-color content="#f8f5ec">
<meta name=msapplication-navbutton-color content="#f8f5ec">
<meta name=apple-mobile-web-app-capable content="yes">
<meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec">
<meta name=mobile-web-app-capable content="yes">
<meta name=author content="Dave">
<meta name=description content="I have been fortunate enough to be given an opportunity to help colleagues at my workplace on their journey to HashiCorp Terraform Associate Certification.
As part of the training track being put together (Mostly centred around the great Pluralsight training material from Ned Bellavance) it seemed a demonstration of some of the capabilities of Terraform would be beneficial for those on their learning journey. I decided to write this article as it will supplement the live demo I will be performing on one of the training sessions and may be of use to anyone else on their journey.">
<meta name=keywords content="Hugo,theme,jane">
<meta name=generator content="Hugo 0.88.0">
<link rel=canonical href=https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/>
<link rel=icon href=/favicon.ico>
<link rel=stylesheet href=/sass/jane.min.fa4b2b9f31b5c6d0b683db81157a9226e17b06e61911791ab547242a4a0556f2.css integrity="sha256-+ksrnzG1xtC2g9uBFXqSJuF7BuYZEXkatUckKkoFVvI=" media=screen crossorigin=anonymous>
<meta property="og:title" content="Terraform: Multi-cloud demo - Part 1 - Foundations">
<meta property="og:description" content="I have been fortunate enough to be given an opportunity to help colleagues at my workplace on their journey to HashiCorp Terraform Associate Certification.
As part of the training track being put together (Mostly centred around the great Pluralsight training material from Ned Bellavance) it seemed a demonstration of some of the capabilities of Terraform would be beneficial for those on their learning journey. I decided to write this article as it will supplement the live demo I will be performing on one of the training sessions and may be of use to anyone else on their journey.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2021-03-26T15:40:13+00:00">
<meta property="article:modified_time" content="2021-03-26T15:40:13+00:00">
<meta itemprop=name content="Terraform: Multi-cloud demo - Part 1 - Foundations">
<meta itemprop=description content="I have been fortunate enough to be given an opportunity to help colleagues at my workplace on their journey to HashiCorp Terraform Associate Certification.
As part of the training track being put together (Mostly centred around the great Pluralsight training material from Ned Bellavance) it seemed a demonstration of some of the capabilities of Terraform would be beneficial for those on their learning journey. I decided to write this article as it will supplement the live demo I will be performing on one of the training sessions and may be of use to anyone else on their journey."><meta itemprop=datePublished content="2021-03-26T15:40:13+00:00">
<meta itemprop=dateModified content="2021-03-26T15:40:13+00:00">
<meta itemprop=wordCount content="1510">
<meta itemprop=keywords content="AWS,Blog,demo,GitHub,GitHub,linux,Terraform,Terraform,training,"><meta name=twitter:card content="summary">
<meta name=twitter:title content="Terraform: Multi-cloud demo - Part 1 - Foundations">
<meta name=twitter:description content="I have been fortunate enough to be given an opportunity to help colleagues at my workplace on their journey to HashiCorp Terraform Associate Certification.
As part of the training track being put together (Mostly centred around the great Pluralsight training material from Ned Bellavance) it seemed a demonstration of some of the capabilities of Terraform would be beneficial for those on their learning journey. I decided to write this article as it will supplement the live demo I will be performing on one of the training sessions and may be of use to anyone else on their journey."><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]-->
</head>
<body>
<div id=mobile-navbar class=mobile-navbar>
<div class=mobile-header-logo>
<a href=/ class=logo>Dave's blog</a>
</div>
<div class=mobile-navbar-icon>
<span></span>
<span></span>
<span></span>
</div>
</div>
<nav id=mobile-menu class="mobile-menu slideout-menu">
<ul class=mobile-menu-list>
<li class=mobile-menu-item>
<a class=menu-item-link href=https://davehart.co.uk/>Home</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=https://davehart.co.uk/post/>Posts</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=https://davehart.co.uk/tags/>Tags</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=https://davehart.co.uk/privacy/>Privacy Policy</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=https://davehart.co.uk/about/>About</a>
</li>
</ul>
</nav>
<link rel=stylesheet href=/lib/photoswipe/photoswipe.min.css>
<link rel=stylesheet href=/lib/photoswipe/default-skin/default-skin.min.css>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div>
<header id=header class="header container">
<div class=logo-wrapper>
<a href=/ class=logo>
Dave's blog
</a>
</div>
<nav class=site-navbar>
<ul id=menu class=menu>
<li class=menu-item>
<a class=menu-item-link href=https://davehart.co.uk/>Home</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=https://davehart.co.uk/post/>Posts</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=https://davehart.co.uk/tags/>Tags</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=https://davehart.co.uk/privacy/>Privacy Policy</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=https://davehart.co.uk/about/>About</a>
</li>
</ul>
</nav>
</header>
<div id=mobile-panel>
<main id=main class="main bg-llight">
<div class=content-wrapper>
<div id=content class="content container">
<article class="post bg-white">
<header class=post-header>
<h1 class=post-title>Terraform: Multi-cloud demo - Part 1 - Foundations</h1>
<div class=post-meta>
<time datetime=2021-03-26 class=post-time>
2021-03-26
</time>
<span class=more-meta> 1510 words </span>
<span class=more-meta> 8 min read </span>
</div>
</header>
<div class=post-toc id=post-toc>
<h2 class=post-toc-title>Table of Contents</h2>
<div class=post-toc-content>
<nav id=TableOfContents>
<ul>
<li><a href=#scope>Scope</a></li>
<li><a href=#requirements>Requirements</a></li>
<li><a href=#version-control>Version Control</a>
<ul>
<li><a href=#personal-access-tokens>Personal access tokens</a></li>
<li><a href=#creating-the-github-repository>Creating the GitHub repository</a></li>
<li><a href=#cloning>Cloning</a></li>
</ul>
</li>
<li><a href=#caching-credentials>Caching credentials</a></li>
<li><a href=#conclusion>Conclusion</a></li>
</ul>
</nav>
</div>
</div>
<div class=post-content>
<p>I have been fortunate enough to be given an opportunity to help colleagues at my workplace on their journey to HashiCorp Terraform Associate Certification.</p>
<p>As part of the training track being put together (Mostly centred around the great Pluralsight training material from Ned Bellavance) it seemed a demonstration of some of the capabilities of Terraform would be beneficial for those on their learning journey. I decided to write this article as it will supplement the live demo I will be performing on one of the training sessions and may be of use to anyone else on their journey. This article concentrates on source control which is a good start point for any project.</p>
<h2 id=scope>Scope</h2>
<p>The demo will focus on delivering the below target architecture;</p>
<figure>
<img sizes="(min-width: 35em) 1200px, 100vw" srcset="https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/image_hu655871af9ee0d94f3c0fe34bef9407f8_77303_480x0_resize_box_3.png 480w," src=https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/image.png>
</figure>
<p>We will build the deployment as follows;</p>
<ul>
<li>Start with the AWS provider and a local state</li>
<li>Use a module from the terraform registry to define the network components. These include;
<ul>
<li>VPC</li>
<li>Private and Public Subnets</li>
<li>Internet Gateway</li>
<li>Nat Gateway</li>
<li>Route tables</li>
</ul>
</li>
<li>Use a module from the terraform registry to define the Security Groups</li>
<li>Create our own module to define an ec2 instance profile for Systems Manager access - Removes the need for a bastion</li>
<li>Create our own ec2 instance module utilising templatefiles for the user data</li>
<li>Deploy and configure a Prometheus server in the private subnet, scrapping itself</li>
<li>Deploy and configure a NGINX server in the public subnet with reverse proxy rule to rewrite traffic to the Prometheus server in the private subnet</li>
<li>Add the Azure provider</li>
<li>Setup the components in Azure to utilise remote state
<ul>
<li>Resource Group</li>
<li>Storage Account</li>
<li>Container</li>
<li>SAS Token</li>
</ul>
</li>
<li>Move to the remote state</li>
</ul>
<h2 id=requirements>Requirements</h2>
<p>I will not be covering the installation of the tools required for this demo but the following outlines my demo environment and the links I used for the component installations;</p>
<ul>
<li>WSL2 running on Windows 10 using Ubuntu 20.04.2 LTS</li>
<li>AWS cli version 2.1.32 &ndash; <a href=https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2-linux.html>link</a></li>
<li>Azure cli version 2.21.0 &ndash; <a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli-linux?pivots=apt">link</a></li>
<li>Terraform 0.14.9 &ndash; <a href=https://www.terraform.io/docs/cli/install/apt.html>link</a></li>
</ul>
<h2 id=version-control>Version Control</h2>
<p>We start where all project should , version/source control. This provides a mechanism to share our code (collaboration) and version control just in case we get it wrong. It&rsquo;s a demo, anything can happen :) Here are the high level steps;</p>
<ol>
<li>Register an account on GitHub</li>
<li>Setup a personal access token for authentication from your client</li>
<li>Create a new repository in your account</li>
<li>Clone the repository to your local machine</li>
</ol>
<p>As I already have an account on GitHub I will jump straight to step 2</p>
<h3 id=personal-access-tokens>Personal access tokens</h3>
<p>You used to be able to authenticate using your account password for GitHub but they are/have sensibly moving/moved to using more secure authentication methods. For this demo we will be utilising the &ldquo;personal access token&rdquo; based authentication.</p>
<p>To create a token you need to open your account settings (click on the picture and select settings) and then navigate to the &ldquo;Developer settings&rdquo; option.</p>
<p>In here you can select &ldquo;Personal access tokens&rdquo; and then &ldquo;Generate new token&rdquo;</p>
<figure>
<img sizes="(min-width: 35em) 1200px, 100vw" srcset="https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/image-17_hu089ea27fca345e8f0be97788210d76ce_16334_480x0_resize_box_3.png 480w,
https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/image-17_hu089ea27fca345e8f0be97788210d76ce_16334_800x0_resize_box_3.png 800w," src=https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/image-17_hu089ea27fca345e8f0be97788210d76ce_16334_800x0_resize_box_3.png>
</figure>
<p>The next page will ask a lot of question which define the scope for the token. It&rsquo;s up-to you but I will be defining the following; (principle of least privilage)</p>
<figure>
<img sizes="(min-width: 35em) 1200px, 100vw" srcset="https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/image-20_hu7f18d3ecb43047edd910c59fd68ac5a8_45736_480x0_resize_box_3.png 480w,
https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/image-20_hu7f18d3ecb43047edd910c59fd68ac5a8_45736_800x0_resize_box_3.png 800w," src=https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/image-20_hu7f18d3ecb43047edd910c59fd68ac5a8_45736_800x0_resize_box_3.png>
</figure>
<p>Generate Personal Access Token</p>
<p>When you have defined your scope, press the generate token button. You will now be shown the token you can use when authenticating with your git repository.</p>
<figure>
<img sizes="(min-width: 35em) 1200px, 100vw" srcset="https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/image-30_hu33b8ca8204142f2c4b68de3e20fdd61e_4586_480x0_resize_box_3.png 480w," src=https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/image-30.png>
</figure>
<p>You should also receive an email from GitHub advising a new token has been created. Extra layer of security! Nice.</p>
<h3 id=creating-the-github-repository>Creating the GitHub repository</h3>
<p>Next off we will be creating our new repository under our GitHub account. This will be used to store our source code and commit all our updates.</p>
<p>From within GitHub, login to your account and press</p>
<figure>
<img sizes="(min-width: 35em) 1200px, 100vw" srcset src=https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/image-40.png>
</figure>
<p>Define your repository settings and then press</p>
<figure>
<img sizes="(min-width: 35em) 1200px, 100vw" srcset src=https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/image-111.png>
</figure>
<p>My repo was made public and I initialised it with;</p>
<ul>
<li>A README file</li>
<li>A .gitignore file
<ul>
<li>using the Terraform template</li>
</ul>
</li>
</ul>
<figure>
<img sizes="(min-width: 35em) 1200px, 100vw" srcset="https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/image-6_hud5f6586d60f3c5f9e984ae96bd4457c1_42804_480x0_resize_box_3.png 480w," src=https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/image-6.png>
</figure>
<p>You should now have a new repository with a .gitignore (Terraform ready!) and a README.md</p>
<figure>
<img sizes="(min-width: 35em) 1200px, 100vw" srcset="https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/image-7_hu1f376d70596f4842e6ebabc91b81ad95_56706_480x0_resize_box_3.png 480w,
https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/image-7_hu1f376d70596f4842e6ebabc91b81ad95_56706_800x0_resize_box_3.png 800w," src=https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/image-7_hu1f376d70596f4842e6ebabc91b81ad95_56706_800x0_resize_box_3.png>
</figure>
<p>Next up we should setup our workstation to clone the repository and sort that README file out. If you are unfamiliar with the markdown format used in the README file, please check <a href=https://guides.github.com/features/mastering-markdown/>this</a> link out.</p>
<h3 id=cloning>Cloning</h3>
<p>We are not referring to the cloning of individuals with identical DNS but something similar. We are going to create a clone of the GitHub repository we created above to our local (WSL2 in my case) desktop. We can then make changes, add new files etc. and push it all back up-to GitHub.</p>
<p>login to your console and navigate to a folder you plan to use for your development;</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>dave@HAL9000:~$ <span class=nb>cd</span> scripts/training/
dave@HAL9000:~/scripts/training$ mkdir demo1
dave@HAL9000:~/scripts/training$ git clone https://github.com/daveihart/tf-training-demo1.git demo1
Cloning into <span class=s1>&#39;demo1&#39;</span>...
remote: Enumerating objects: 4, <span class=k>done</span>.
remote: Counting objects: 100% <span class=o>(</span>4/4<span class=o>)</span>, <span class=k>done</span>.
remote: Compressing objects: 100% <span class=o>(</span>3/3<span class=o>)</span>, <span class=k>done</span>.
remote: Total <span class=m>4</span> <span class=o>(</span>delta 0<span class=o>)</span>, reused <span class=m>0</span> <span class=o>(</span>delta 0<span class=o>)</span>, pack-reused <span class=m>0</span>
Unpacking objects: 100% <span class=o>(</span>4/4<span class=o>)</span>, <span class=m>995</span> bytes <span class=p>|</span> 995.00 KiB/s, <span class=k>done</span>.
dave@HAL9000:~/scripts/training$ <span class=nb>cd</span> demo1
dave@HAL9000:~/scripts/training/demo1$ ll
total <span class=m>20</span>
drwxr-xr-x <span class=m>3</span> dave dave <span class=m>4096</span> Mar <span class=m>26</span> 13:41 ./
drwxr-xr-x <span class=m>3</span> dave dave <span class=m>4096</span> Mar <span class=m>26</span> 13:41 ../
drwxr-xr-x <span class=m>8</span> dave dave <span class=m>4096</span> Mar <span class=m>26</span> 13:41 .git/
-rw-r--r-- <span class=m>1</span> dave dave  <span class=m>716</span> Mar <span class=m>26</span> 13:41 .gitignore
-rw-r--r-- <span class=m>1</span> dave dave   <span class=m>45</span> Mar <span class=m>26</span> 13:41 README.md
</code></pre></td></tr></table>
</div>
</div><p>You will notice that we were not prompted to authenticate at any point during the cloning process, this is due to us defining the repository as public. A Private repository would have prompted for credentials. We will get to use the token once we try push any changes.</p>
<p>Next off we will launch visual studio code (<a href=https://docs.microsoft.com/en-us/windows/wsl/tutorials/wsl-vscode>vscode</a>) to update the README.md</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>dave@HAL9000:~/scripts/training/demo1$ code .
Updating VS Code Server to version 622cb03f7e070a9670c94bae1a45d78d7181fbd4
Removing previous installation...
Installing VS Code Server <span class=k>for</span> x64 <span class=o>(</span>622cb03f7e070a9670c94bae1a45d78d7181fbd4<span class=o>)</span>
Downloading: 100%
Unpacking: 100%
Unpacked <span class=m>1769</span> files and folders to /home/dave/.vscode-server/bin/622cb03f7e070a9670c94bae1a45d78d7181fbd4.
</code></pre></td></tr></table>
</div>
</div><p>Once vscode has launched (mine needed an update) we open the README.md and update the contents. Here is one I prepared earlier;</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=gh># terraform-certification-demo1
</span><span class=gh></span>
<span class=gu>## Details
</span><span class=gu></span>As part of an external certification program this demo has been created to help colleagues obtain Hashicorp Terraform associate certification

<span class=gu>## Deployment details
</span><span class=gu></span>The demonstration will deploy the following using Terraform

<span class=k>1.</span> Setup a VCS (git - this is not using terraform but it can be and maybe included at a later date when I work it out)
<span class=k>2.</span> AWS Components (aws provider)
    <span class=k>1.</span> VPC
	<span class=k>2.</span> Private and Public Subnets
	<span class=k>3.</span> Internet Gateway
	<span class=k>4.</span> Nat Gateway
	<span class=k>5.</span> Route tables
    <span class=k>6.</span> Security Groups
    <span class=k>7.</span> Instance profile
    <span class=k>8.</span> IAM Policy
    <span class=k>9.</span> Deploy and configure a Prometheus server in the private subnet
    <span class=k>10.</span> Deploy and configure a NGINX server with reverse proxy rule to access the Prometheus server in the public subnet
<span class=k>3.</span> Azure components
    <span class=k>1.</span> Create a resource group
    <span class=k>2.</span> Create a storage account
    <span class=k>3.</span> Setup blob storage
	<span class=k>4.</span> crete a container for holding the state file
<span class=k>4.</span> Utilise the Azure container for Terraform remote state

<span class=gu>### Known issues
</span><span class=gu></span>None

<span class=gu>### Planned enhancements
</span><span class=gu></span>None presently

<span class=gu>## Author
</span><span class=gu></span>**Dave Hart**
[<span class=nt>link to blog!</span>](<span class=na>https://davehart.co.uk</span>)
</code></pre></td></tr></table>
</div>
</div><p>Save the file and jump back to the console. Now we will update the GitHub repository with the changes. We will now be asked to authenticate, use the token as your password.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>dave@HAL9000:~/scripts/training/demo1$ git add README.md
dave@HAL9000:~/scripts/training/demo1$ git commit -m <span class=s2>&#34;updating the readme file to reflect the demo deployment&#34;</span>
<span class=o>[</span>main e116fb8<span class=o>]</span> updating the readme file to reflect the demo deployment
 <span class=m>1</span> file changed, <span class=m>36</span> insertions<span class=o>(</span>+<span class=o>)</span>, <span class=m>2</span> deletions<span class=o>(</span>-<span class=o>)</span>
 rewrite README.md <span class=o>(</span>100%<span class=o>)</span>
dave@HAL9000:~/scripts/training/demo1$ git push
Username <span class=k>for</span> <span class=s1>&#39;https://github.com&#39;</span>: daveihart@hotmail.com
Password <span class=k>for</span> <span class=s1>&#39;https://daveihart@hotmail.com@github.com&#39;</span>:
Enumerating objects: 5, <span class=k>done</span>.
Counting objects: 100% <span class=o>(</span>5/5<span class=o>)</span>, <span class=k>done</span>.
Delta compression using up to <span class=m>6</span> threads
Compressing objects: 100% <span class=o>(</span>3/3<span class=o>)</span>, <span class=k>done</span>.
Writing objects: 100% <span class=o>(</span>3/3<span class=o>)</span>, <span class=m>916</span> bytes <span class=p>|</span> 916.00 KiB/s, <span class=k>done</span>.
Total <span class=m>3</span> <span class=o>(</span>delta 0<span class=o>)</span>, reused <span class=m>0</span> <span class=o>(</span>delta 0<span class=o>)</span>
To https://github.com/daveihart/tf-training-demo1.git
   b60fbe6..e116fb8  main -&gt; main
dave@HAL9000:~/scripts/training/demo1$
</code></pre></td></tr></table>
</div>
</div><p>If we refresh the GitHub repository the README should update to reflect the changes we just made.</p>
<figure>
<img sizes="(min-width: 35em) 1200px, 100vw" srcset="https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/image-8_huac7cc53e2b09d7204c8241013898eb27_69609_480x0_resize_box_3.png 480w,
https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/image-8_huac7cc53e2b09d7204c8241013898eb27_69609_800x0_resize_box_3.png 800w," src=https://davehart.co.uk/post/terraform-multi-cloud-demo-part-1-foundations/image-8_huac7cc53e2b09d7204c8241013898eb27_69609_800x0_resize_box_3.png>
</figure>
<p>snippet of the GitHub repository</p>
<p>Below is a small video showing the above steps;</p>
<p><img src=github.gif alt></p>
<h2 id=caching-credentials>Caching credentials</h2>
<p>Once you start pushing changes in anger the constant authentication prompt will slow you down. You can try this;</p>
<p>Before a push;</p>
<p><strong>git config &ndash;global credential.helper store</strong></p>
<p>Push your changes;</p>
<p>After the push;</p>
<p><strong>git config &ndash;global credential.helper cache</strong></p>
<p>I don&rsquo;t mind this type of cache as its only for the current session (in memory).</p>
<h2 id=conclusion>Conclusion</h2>
<p>We have now laid the foundation for the rest of the demo. We can update the repository as we write and update our code. It&rsquo;s not only held on our local machine, it&rsquo;s visible to others and version controlled. This is the first important step in your code creation and deployment.</p>
<p><a href=https://github.com/daveihart/tf-training-demo1>Link</a> to GitHub repository</p>
<p>In <a href=/post/terraform-multi-cloud-demo-part-2-terraform-remote-state-on-azure/>part 2</a> we can start writing some Terraform code&mldr;.</p>
</div>
<footer class=post-footer>
<div class=post-tags>
<a href=https://davehart.co.uk/tags/aws/>AWS</a>
<a href=https://davehart.co.uk/tags/blog/>Blog</a>
<a href=https://davehart.co.uk/tags/demo/>demo</a>
<a href=https://davehart.co.uk/tags/github/>GitHub</a>
<a href=https://davehart.co.uk/tags/github/>GitHub</a>
<a href=https://davehart.co.uk/tags/linux/>linux</a>
<a href=https://davehart.co.uk/tags/terraform/>Terraform</a>
<a href=https://davehart.co.uk/tags/terraform/>Terraform</a>
<a href=https://davehart.co.uk/tags/training/>training</a>
</div>
<nav class=post-nav>
<a class=next href=/post/automation-apache-and-route-53/>
<span class="next-text nav-default">Automation: Apache and Route 53</span>
<span class="prev-text nav-mobile">Next</span>
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697c-11.777231-11.500939-30.216186-10.304694-41.178865 2.712784z"/></svg>
</i>
</a>
</nav>
</footer>
</article>
</div>
</div>
</main>
<footer id=footer class=footer>
<div class=icon-links>
<a href=https://twitter.com/daveihart rel="me noopener" class=iconfont title=twitter target=_blank><svg class="icon" viewBox="0 0 1264 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36"><path d="M1229.8616 18.043658s-117.852626 63.135335-164.151872 67.344358C960.484169-78.763856 560.627046-7.210476 627.971403 308.466201 278.622548 312.675223 89.216542 47.506814 89.216542 47.506814S-28.636084 236.91282 164.978944 392.646647C127.097743 396.85567 55.544363 371.601535 55.544363 371.601535S26.081207 535.753407 253.368414 615.724832c-21.045112 29.463156-113.643603 8.418045-113.643603 8.418045s25.254134 143.10676 231.496229 180.987961c-143.10676 130.479693-387.230056 92.598492-370.393967 105.225559 206.242095 189.406006 1119.599946 231.496229 1128.01799-643.98042 50.5082679999998-16.83609 134.688715-143.10676 134.688715-143.10676s-130.479693 37.881201-138.897738 33.672179C1225.652577 98.015083 1229.8616 18.043658 1229.8616 18.043658"/></svg>
</a>
<a href=https://www.linkedin.com/in/dave-hart/ rel="me noopener" class=iconfont title=linkedin target=_blank><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="33" height="33"><path d="M872.405333 872.618667H720.768V635.008c0-56.661333-1.152-129.578667-79.018667-129.578667-79.061333.0-91.136 61.653333-91.136 125.397334v241.792H398.976V384H544.64v66.602667h1.962667c20.352-38.4 69.845333-78.933333 143.786666-78.933334 153.642667.0 182.058667 101.12 182.058667 232.746667v268.202667zM227.712 317.141333a87.978667 87.978667.0 01-88.021333-88.106666A88.064 88.064.0 11227.712 317.141333zm76.032 555.477334H151.68V384h152.064v488.618667zM948.266667.0h-872.704C33.792.0.0 33.024.0 73.770667v876.458666C0 991.018667 33.792 1024 75.562667 1024h872.576C989.866667 1024 1024 991.018667 1024 950.229333V73.770667C1024 33.024 989.866667.0 948.138667.0h.128z"/></svg>
</a>
<a href=https://github.com/daveihart rel="me noopener" class=iconfont title=github target=_blank><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36"><path d="M512 12.672c-282.88.0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667.0-12.16-.426667-44.373333-.64-87.04C242.005334 929.664 211.968 830.08 211.968 830.08 188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333.0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333.0.0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667.0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72.0 68.522667-.64 123.562667-.64 140.202666.0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"/></svg>
</a>
<a href=https://davehart.co.uk/index.xml rel="noopener alternate" type=application/rss+xml class=iconfont title=rss target=_blank><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30"><path d="M819.157333 1024C819.157333 574.592 449.408 204.8.0 204.8V0c561.706667.0 1024 462.293333 1024 1024H819.157333zM140.416 743.04a140.8 140.8.0 01140.501333 140.586667A140.928 140.928.0 01140.074667 1024C62.72 1024 0 961.109333.0 883.626667S62.933333 743.082667 140.416 743.04zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667v-199.04c372.352.0 678.784 306.517333 678.784 678.826667z"/></svg>
</a>
</div>
<div class=copyright>
<span class=power-by>
Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a>
</span>
<span class=division>|</span>
<span class=theme-info>
Theme - <a class=theme-link href=https://github.com/xianmin/hugo-theme-jane>Jane</a>
</span>
<span class=copyright-year>
&copy;
2020 -
2021
<span class=heart>
<i class=iconfont><svg class="icon" viewBox="0 0 1025 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14"><path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7.0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1.0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2.0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3.1-42.5-8-83.6-24-122.2z" fill="#8a8a8a"/></svg>
</i>
</span><span class=author>
Dave
</span></span>
</div>
</footer>
<div class=back-to-top id=back-to-top>
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="35" height="35"><path d="M510.866688 227.694839 95.449397 629.218702h235.761562L329.15309 958.01517h362.40389L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777h894.052392v131.813095H63.840492V63.962777zm0 0"/></svg>
</i>
</div>
</div>
<script type=text/javascript src=/lib/jquery/jquery-3.2.1.min.js></script>
<script type=text/javascript src=/lib/slideout/slideout-1.0.1.min.js></script>
<script type=text/javascript src=/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/load-photoswipe.js></script>
<script type=text/javascript src=/lib/photoswipe/photoswipe.min.js></script>
<script type=text/javascript src=/lib/photoswipe/photoswipe-ui-default.min.js></script>
</body>
</html>